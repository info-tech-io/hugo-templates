# Единый движок для интерактивных тестовых заданий (Quiz Engine)

Этот документ описывает, как использовать единый движок `quiz-engine.js` для создания интерактивных проверочных заданий. Этот подход заменяет использование отдельных скриптов для каждого типа теста, предоставляя централизованный, гибкий и мультиязычный способ управления тестами.

## Ключевые возможности

-   **Централизованная логика**: Вся логика находится в одном файле `quiz-engine.js`.
-   **Конфигурация через JSON**: Поведение каждого теста настраивается в его файле данных.
-   **Поддержка нескольких типов тестов**: Один правильный ответ, несколько правильных ответов, ввод текста.
-   **Интернационализация (i18n)**: Полная поддержка нескольких языков (RU/EN) как для интерфейса, так и для контента заданий.
-   **Надежность**: Код покрыт автоматизированными тестами с использованием Jest.

## Как использовать

### 1. Подключение скрипта

Подключите скрипт `quiz-engine.js` на вашей HTML-странице, желательно в конце тега `<body>`.

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <title>Урок с тестами</title>
</head>
<body>
    <!-- Ваш контент урока -->

    <h3>Проверочное задание №1</h3>
    <div class="quiz-container" data-quiz-src="/quiz-examples/sc-extension-mod.json"></div>

    <h3>Проверочное задание №2 (на английском)</h3>
    <div class="quiz-container" data-quiz-src="/quiz-examples/if-mod-extension.json"></div>

    <!-- Подключение движка -->
    <script src="/quiz-engine/quiz-engine.js"></script>
</body>
</html>
```

### 2. Вставка теста в HTML

Чтобы вставить тест, используйте следующий HTML-сниппет:

```html
<div class="quiz-container" data-quiz-src="path/to/quiz-data.json"></div>
```

-   `class="quiz-container"`: Обязательный класс, по которому движок находит место для вставки теста.
-   `data-quiz-src`: Атрибут, содержащий путь к JSON-файлу с данными и конфигурацией этого теста.

### 3. Управление языком

Движок автоматически определяет язык в следующем порядке:
1.  **Параметр в URL**: `?lang=en` или `?lang=ru`. Это позволяет создавать прямые ссылки на версию теста на определенном языке.
2.  **Язык браузера**: Если параметр в URL отсутствует, используется язык браузера.
3.  **Язык по умолчанию**: Если язык браузера не поддерживается, используется английский (`en`).

### 4. Создание файла с заданием (`quiz-data.json`)

Это основной шаг. Вы создаете JSON-файл, который содержит конфигурацию теста и его контент, адаптированный для мультиязычности.

**Пример мультиязычного `quiz-data.json`:**
```json
{
  "config": {
    "type": "single-choice",
    "showExplanation": "all"
  },
  "question": {
    "ru": "Какой тег является самым важным?",
    "en": "Which tag is the most important?"
  },
  "answers": [
    {
      "text": { "ru": "<h1>", "en": "<h1>" },
      "correct": true,
      "description": {
        "ru": "Верно, h1 - самый важный.",
        "en": "Correct, h1 is the most important."
      }
    },
    {
      "text": { "ru": "<h6>", "en": "<h6>" },
      "correct": false,
      "description": {
        "ru": "Неверно, h6 - наименее важный.",
        "en": "Incorrect, h6 is the least important."
      }
    }
  ]
}
```

Полное описание всех возможных типов и параметров конфигурации смотрите в файле [**config.md**](./config.md).

## Тестирование

Проект настроен для автоматизированного тестирования с помощью Jest.
-   Тестовые сценарии находятся в `__tests__/quiz-engine.test.js`.
-   Тестовые данные (мок-файлы) находятся в `quiz-examples/`.

Для запуска всех тестов выполните команду:
```bash
npm test
```
